## linux搭建git服务器

### 1.安装(#->代表命令提示符)

	#-> yum install git
	

### 2.创建组用户
	
创建用户组的目的其实是为了控制某一类用户的权限。假设我们需要为设计部搭建一个git服务器，那我们此处需要输入命令。

	#-> groupadd 组名称

创建组完成后我们需要创建几个不同的用户：

	#-> useradd -M 用户名称1
	#-> useradd -M 用户名称2

创建好用户之后我们还需要把用户添加到之前创建的组中：

	#-> usermod -G 组名称 用户名称1
	#-> usermod -G 组名称 用户名称2

useradd是添加系统用户的命令，如果不加-M的选项则创建用户的时候会自动在/home目录下创建一个和用户名相同的目录，这个目录通常被称作该用户的家目录，该用户在该目录下拥有读写权限。权限问题会在后边进一步介绍。在此，我们的目的是搭建git服务器，并不想给用户除了git访问以外其他的权限，所以这里使用-M选项让系统不给该用户创建自己的家目录。
usermod是用户管理命令，-G表示将用户添加到某个分组。

### 3.在/home目录下创建一个公共家目录
	
	#-> mkdair 组目录名称   (为了保留秘钥登录的验证信息)

### 4.禁用掉其他用户ssh到服务器，只留给用户git相关权限，并且修改用户的家目录

	#-> vim /etc/passwd

找到所创建用户的这一行：

	用户名称:x:1000:1000::/home/用户名称:/bin/bash

将/bin/bash替换成git-shell的路径（我的服务器是：/usr/bin/git-shell，可以通过#-> which git-shell来查看git-shell所在路径） 将/home/用户名称替换成/home/组目录名称
	
### 5.创建我们想要的git仓库
	
	#-> cd /home/组目录名称
	#-> mkdir 新仓库名称.git
	cd 新仓库名称.git

使用git命令来创建一个裸仓库

	#-> git --bare init

### 6.客户端clone该仓库

	#-> git clone 刚刚创建的用户名称@你的服务器IP:新仓库名称.git    (端口默认22)

	#-> git clone ssh://刚刚创建的用户名称@你的服务器IP:端口/新仓库名称.git    (其他端口)

### 7.修改目录权限

因为新创建的用户此时并没有写权限，我们需要回到服务器

	#-> cd /home

修改组目录所属的分组

	#-> chgrp -R 组名 组目录名称

-R表示递归修改所有子目录所属分组

然后修改组目录的权限
	
	#-> chmod -R 775 组目录名称



